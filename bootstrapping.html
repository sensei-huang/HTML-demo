<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Random Forest Bootstrap Demo</title>

<style>
  body { font-family: sans-serif; margin: 20px; }
  .dataset, .tree {
    border: 1px solid #444;
    padding: 10px;
    margin: 10px 0;
    min-height: 50px;
  }
  .sample {
    display: inline-block;
    padding: 5px 8px;
    margin: 2px;
    border-radius: 4px;
    color: white;
    transition: transform 0.5s;
  }
  .classA { background-color: #4A90E2; }
  .classB { background-color: #E24A4A; }
  .tree-container { display: flex; gap: 20px; margin-top: 20px; }
  button { margin-top: 10px; }
</style>
</head>
<body>

<h2>Random Forest Bootstrap Sampling Demo</h2>
<p>Click "Sample Trees" to randomly assign data (with replacement) to 3 trees (~2/3 of the data will appear in the tree and the rest will be duplicates).</p>

<h3>Original Dataset</h3>
<div id="dataset" class="dataset"></div>

<div class="tree-container">
  <div>
    <h4>Tree 1</h4>
    <div id="tree1" class="tree"></div>
  </div>
  <div>
    <h4>Tree 2</h4>
    <div id="tree2" class="tree"></div>
  </div>
  <div>
    <h4>Tree 3</h4>
    <div id="tree3" class="tree"></div>
  </div>
</div>

<button id="sampleButton">Sample Trees</button>

<script>
// SAMPLE DATA
const samples = [
  {id:1,x:1.2,y:"A"}, {id:2,x:2.5,y:"A"}, {id:3,x:3.1,y:"B"},
  {id:4,x:4.8,y:"B"}, {id:5,x:6.0,y:"A"}, {id:6,x:7.4,y:"A"},
  {id:7,x:8.8,y:"B"}, {id:8,x:9.0,y:"B"}, {id:9,x:5.5,y:"A"}
];

// RENDER ORIGINAL DATA
const datasetDiv = document.getElementById("dataset");
function renderDataset() {
  datasetDiv.innerHTML = "";
  samples.forEach(s => {
    const span = document.createElement("span");
    span.className = `sample class${s.y}`;
    span.id = `sample-${s.id}`;
    span.textContent = s.x;
    datasetDiv.appendChild(span);
  });
}
renderDataset();

// RANDOM BOOTSTRAP SAMPLING FUNCTION
function bootstrapSample(data, size) {
  const sample = [];
  for (let i=0; i<size; i++) {
    const idx = Math.floor(Math.random() * data.length);
    sample.push(data[idx]);
  }
  return sample;
}

// CLEAR TREES
function clearTrees() {
  for (let i=1;i<=3;i++) {
    document.getElementById(`tree${i}`).innerHTML = "";
  }
}

// ANIMATE MOVEMENT OF DATA TO TREES
function moveSamplesToTree(samples, treeDiv) {
  samples.forEach((s,i) => {
    const orig = document.getElementById(`sample-${s.id}`);
    if (!orig) return; // sometimes duplicates
    const clone = orig.cloneNode(true);
    clone.style.position = "relative";
    clone.style.transition = "transform 0.5s, opacity 0.5s";
    clone.style.opacity = "0";
    treeDiv.appendChild(clone);

    // slight delay for animation
    setTimeout(() => { clone.style.opacity = "1"; }, i*100);
  });
}

// ON BUTTON CLICK
document.getElementById("sampleButton").onclick = () => {
  clearTrees();

  const n = samples.length;
  const treeSize = Math.round(n);

  const tree1Samples = bootstrapSample(samples, treeSize);
  const tree2Samples = bootstrapSample(samples, treeSize);
  const tree3Samples = bootstrapSample(samples, treeSize);

  moveSamplesToTree(tree1Samples, document.getElementById("tree1"));
  moveSamplesToTree(tree2Samples, document.getElementById("tree2"));
  moveSamplesToTree(tree3Samples, document.getElementById("tree3"));
};
</script>

</body>
</html>
